                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.6.0 #9615 (MINGW64)
                              4 ;--------------------------------------------------------
                              5 	.module WYZplayer
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _TABLA_DATOS_CANAL_SFX
                             12 	.globl _SELECT_CANAL_C
                             13 	.globl _SELECT_CANAL_B
                             14 	.globl _SELECT_CANAL_A
                             15 	.globl _DATOS_NOTAS
                             16 	.globl _TABLA_SONIDOS
                             17 	.globl _TABLA_PAUTAS
                             18 	.globl _TABLA_SONG
                             19 	.globl _SOUND_BUFFER_P
                             20 	.globl _SOUND_BUFFER_C
                             21 	.globl _SOUND_BUFFER_B
                             22 	.globl _SOUND_BUFFER_A
                             23 	.globl _ENVOLVENTE_BACK
                             24 	.globl _ENVOLVENTE
                             25 	.globl _PSG_REG_SEC
                             26 	.globl _PSG_REG
                             27 	.globl _PUNTERO_SONIDO
                             28 	.globl _N_SONIDO
                             29 	.globl _SFX_MIX
                             30 	.globl _SFX_V
                             31 	.globl _SFX_H
                             32 	.globl _SFX_L
                             33 	.globl _PUNTERO_L_DECP
                             34 	.globl _PUNTERO_DECP
                             35 	.globl _PUNTERO_P_DECP
                             36 	.globl _CANAL_P
                             37 	.globl _PUNTERO_P
                             38 	.globl _PUNTERO_L_DECC
                             39 	.globl _PUNTERO_L_DECB
                             40 	.globl _PUNTERO_L_DECA
                             41 	.globl _VOL_INST_C
                             42 	.globl _REG_NOTA_C
                             43 	.globl _VOL_INST_B
                             44 	.globl _REG_NOTA_B
                             45 	.globl _VOL_INST_A
                             46 	.globl _REG_NOTA_A
                             47 	.globl _PUNTERO_DECC
                             48 	.globl _PUNTERO_DECB
                             49 	.globl _PUNTERO_DECA
                             50 	.globl _PUNTERO_P_DECC
                             51 	.globl _PUNTERO_P_DECB
                             52 	.globl _PUNTERO_P_DECA
                             53 	.globl _PUNTERO_P_C0
                             54 	.globl _PUNTERO_P_B0
                             55 	.globl _PUNTERO_P_A0
                             56 	.globl _PUNTERO_P_C
                             57 	.globl _PUNTERO_P_B
                             58 	.globl _PUNTERO_P_A
                             59 	.globl _CANAL_C
                             60 	.globl _CANAL_B
                             61 	.globl _CANAL_A
                             62 	.globl _PUNTERO_C
                             63 	.globl _PUNTERO_B
                             64 	.globl _PUNTERO_A
                             65 	.globl _TTEMPO
                             66 	.globl _TEMPO
                             67 	.globl _SONG
                             68 	.globl _WYZstate
                             69 	.globl _WYZinit
                             70 	.globl _WYZpause
                             71 	.globl _WYZresume
                             72 	.globl _WYZsetLoop
                             73 	.globl _WYZplayFX
                             74 	.globl _WYZplayAY
                             75 	.globl _WYZloadSong
                             76 	.globl _WYZdecode
                             77 ;--------------------------------------------------------
                             78 ; special function registers
                             79 ;--------------------------------------------------------
                             80 ;--------------------------------------------------------
                             81 ; ram data
                             82 ;--------------------------------------------------------
                             83 	.area _DATA
   0000                      84 _WYZstate::
   0000                      85 	.ds 1
   0001                      86 _SONG::
   0001                      87 	.ds 1
   0002                      88 _TEMPO::
   0002                      89 	.ds 1
   0003                      90 _TTEMPO::
   0003                      91 	.ds 1
   0004                      92 _PUNTERO_A::
   0004                      93 	.ds 2
   0006                      94 _PUNTERO_B::
   0006                      95 	.ds 2
   0008                      96 _PUNTERO_C::
   0008                      97 	.ds 2
   000A                      98 _CANAL_A::
   000A                      99 	.ds 2
   000C                     100 _CANAL_B::
   000C                     101 	.ds 2
   000E                     102 _CANAL_C::
   000E                     103 	.ds 2
   0010                     104 _PUNTERO_P_A::
   0010                     105 	.ds 2
   0012                     106 _PUNTERO_P_B::
   0012                     107 	.ds 2
   0014                     108 _PUNTERO_P_C::
   0014                     109 	.ds 2
   0016                     110 _PUNTERO_P_A0::
   0016                     111 	.ds 2
   0018                     112 _PUNTERO_P_B0::
   0018                     113 	.ds 2
   001A                     114 _PUNTERO_P_C0::
   001A                     115 	.ds 2
   001C                     116 _PUNTERO_P_DECA::
   001C                     117 	.ds 2
   001E                     118 _PUNTERO_P_DECB::
   001E                     119 	.ds 2
   0020                     120 _PUNTERO_P_DECC::
   0020                     121 	.ds 2
   0022                     122 _PUNTERO_DECA::
   0022                     123 	.ds 2
   0024                     124 _PUNTERO_DECB::
   0024                     125 	.ds 2
   0026                     126 _PUNTERO_DECC::
   0026                     127 	.ds 2
   0028                     128 _REG_NOTA_A::
   0028                     129 	.ds 1
   0029                     130 _VOL_INST_A::
   0029                     131 	.ds 1
   002A                     132 _REG_NOTA_B::
   002A                     133 	.ds 1
   002B                     134 _VOL_INST_B::
   002B                     135 	.ds 1
   002C                     136 _REG_NOTA_C::
   002C                     137 	.ds 1
   002D                     138 _VOL_INST_C::
   002D                     139 	.ds 1
   002E                     140 _PUNTERO_L_DECA::
   002E                     141 	.ds 2
   0030                     142 _PUNTERO_L_DECB::
   0030                     143 	.ds 2
   0032                     144 _PUNTERO_L_DECC::
   0032                     145 	.ds 2
   0034                     146 _PUNTERO_P::
   0034                     147 	.ds 2
   0036                     148 _CANAL_P::
   0036                     149 	.ds 2
   0038                     150 _PUNTERO_P_DECP::
   0038                     151 	.ds 2
   003A                     152 _PUNTERO_DECP::
   003A                     153 	.ds 2
   003C                     154 _PUNTERO_L_DECP::
   003C                     155 	.ds 2
   003E                     156 _SFX_L::
   003E                     157 	.ds 2
   0040                     158 _SFX_H::
   0040                     159 	.ds 2
   0042                     160 _SFX_V::
   0042                     161 	.ds 2
   0044                     162 _SFX_MIX::
   0044                     163 	.ds 2
   0046                     164 _N_SONIDO::
   0046                     165 	.ds 1
   0047                     166 _PUNTERO_SONIDO::
   0047                     167 	.ds 2
   0049                     168 _PSG_REG::
   0049                     169 	.ds 16
   0059                     170 _PSG_REG_SEC::
   0059                     171 	.ds 16
   0069                     172 _ENVOLVENTE::
   0069                     173 	.ds 1
   006A                     174 _ENVOLVENTE_BACK::
   006A                     175 	.ds 1
   006B                     176 _SOUND_BUFFER_A::
   006B                     177 	.ds 16
   007B                     178 _SOUND_BUFFER_B::
   007B                     179 	.ds 16
   008B                     180 _SOUND_BUFFER_C::
   008B                     181 	.ds 16
   009B                     182 _SOUND_BUFFER_P::
   009B                     183 	.ds 16
   00AB                     184 _TABLA_SONG::
   00AB                     185 	.ds 2
   00AD                     186 _TABLA_PAUTAS::
   00AD                     187 	.ds 2
   00AF                     188 _TABLA_SONIDOS::
   00AF                     189 	.ds 2
   00B1                     190 _DATOS_NOTAS::
   00B1                     191 	.ds 2
   00B3                     192 _SELECT_CANAL_A::
   00B3                     193 	.ds 7
   00BA                     194 _SELECT_CANAL_B::
   00BA                     195 	.ds 7
   00C1                     196 _SELECT_CANAL_C::
   00C1                     197 	.ds 7
   00C8                     198 _TABLA_DATOS_CANAL_SFX::
   00C8                     199 	.ds 6
                            200 ;--------------------------------------------------------
                            201 ; ram data
                            202 ;--------------------------------------------------------
                            203 	.area _INITIALIZED
                            204 ;--------------------------------------------------------
                            205 ; absolute external ram data
                            206 ;--------------------------------------------------------
                            207 	.area _DABS (ABS)
                            208 ;--------------------------------------------------------
                            209 ; global & static initialisations
                            210 ;--------------------------------------------------------
                            211 	.area _HOME
                            212 	.area _GSINIT
                            213 	.area _GSFINAL
                            214 	.area _GSINIT
                            215 ;--------------------------------------------------------
                            216 ; Home
                            217 ;--------------------------------------------------------
                            218 	.area _HOME
                            219 	.area _HOME
                            220 ;--------------------------------------------------------
                            221 ; code
                            222 ;--------------------------------------------------------
                            223 	.area _CODE
                            224 ;src\WYZplayer.c:186: void WYZinit(unsigned int addrSONGs, unsigned int addrInstruments, unsigned int addrFXs, unsigned int addrFreqs) __naked
                            225 ;	---------------------------------
                            226 ; Function WYZinit
                            227 ; ---------------------------------
   0000                     228 _WYZinit::
                            229 ;src\WYZplayer.c:285: __endasm;
   0000 DD E5         [15]  230 	push	IX
   0002 DD 21 00 00   [14]  231 	ld	IX,#0
   0006 DD 39         [15]  232 	add	IX,SP
   0008 DD 6E 04      [19]  233 	ld	L,4(IX)
   000B DD 66 05      [19]  234 	ld	H,5(IX)
   000E 22rABr00      [16]  235 	ld	(#_TABLA_SONG),HL
   0011 DD 6E 06      [19]  236 	ld	L,6(IX)
   0014 DD 66 07      [19]  237 	ld	H,7(IX)
   0017 22rADr00      [16]  238 	ld	(#_TABLA_PAUTAS),HL
   001A DD 6E 08      [19]  239 	ld	L,8(IX)
   001D DD 66 09      [19]  240 	ld	H,9(IX)
   0020 22rAFr00      [16]  241 	ld	(#_TABLA_SONIDOS),HL
   0023 DD 6E 0A      [19]  242 	ld	L,10(IX)
   0026 DD 66 0B      [19]  243 	ld	H,11(IX)
   0029 22rB1r00      [16]  244 	ld	(#_DATOS_NOTAS),HL
   002C AF            [ 4]  245 	XOR	A
   002D 32r00r00      [13]  246 	LD	(#_WYZstate),A
   0030 CDrAAr00      [17]  247 	call	CLEAR_PSG_BUFFER ;PLAYER_OFF
   0033 21r6Br00      [10]  248 	LD	HL,#_SOUND_BUFFER_A ;* RESERVAR MEMORIA PARA BUFFER DE SONIDO!!!!!
   0036 22r0Ar00      [16]  249 	LD	(#_CANAL_A),HL
   0039 21r7Br00      [10]  250 	LD	HL,#_SOUND_BUFFER_B
   003C 22r0Cr00      [16]  251 	LD	(#_CANAL_B),HL
   003F 21r8Br00      [10]  252 	LD	HL,#_SOUND_BUFFER_C
   0042 22r0Er00      [16]  253 	LD	(#_CANAL_C),HL
   0045 21r9Br00      [10]  254 	LD	HL,#_SOUND_BUFFER_P
   0048 22r36r00      [16]  255 	LD	(#_CANAL_P),HL
                            256 ;TABLA	DE DATOS DEL SELECTOR DEL CANAL DE EFECTOS DE RITMO
                            257 ;---	chan A
   004B 21r59r00      [10]  258 	LD	HL,#_PSG_REG_SEC+0
   004E 22rB3r00      [16]  259 	LD	(#_SELECT_CANAL_A),HL
   0051 21r5Ar00      [10]  260 	LD	HL,#_PSG_REG_SEC+1
   0054 22rB5r00      [16]  261 	LD	(#_SELECT_CANAL_A+2),HL
   0057 21r61r00      [10]  262 	LD	HL,#_PSG_REG_SEC+8
   005A 22rB7r00      [16]  263 	LD	(#_SELECT_CANAL_A+4),HL
   005D 3E B1         [ 7]  264 	LD	A,#0b10110001
   005F 32rB9r00      [13]  265 	LD	(#_SELECT_CANAL_A+6),A
                            266 ;---	chan B
   0062 21r5Br00      [10]  267 	LD	HL,#_PSG_REG_SEC+2
   0065 22rBAr00      [16]  268 	LD	(#_SELECT_CANAL_B),HL
   0068 21r5Cr00      [10]  269 	LD	HL,#_PSG_REG_SEC+3
   006B 22rBCr00      [16]  270 	LD	(#_SELECT_CANAL_B+2),HL
   006E 21r62r00      [10]  271 	LD	HL,#_PSG_REG_SEC+9
   0071 22rBEr00      [16]  272 	LD	(#_SELECT_CANAL_B+4),HL
   0074 3E AA         [ 7]  273 	LD	A,#0b10101010
   0076 32rC0r00      [13]  274 	LD	(#_SELECT_CANAL_B+6),A
                            275 ;---	chan C
   0079 21r5Dr00      [10]  276 	LD	HL,#_PSG_REG_SEC+4
   007C 22rC1r00      [16]  277 	LD	(#_SELECT_CANAL_C),HL
   007F 21r5Er00      [10]  278 	LD	HL,#_PSG_REG_SEC+5
   0082 22rC3r00      [16]  279 	LD	(#_SELECT_CANAL_C+2),HL
   0085 21r63r00      [10]  280 	LD	HL,#_PSG_REG_SEC+10
   0088 22rC5r00      [16]  281 	LD	(#_SELECT_CANAL_C+4),HL
   008B 3E 9C         [ 7]  282 	LD	A,#0b10011100
   008D 32rC7r00      [13]  283 	LD	(#_SELECT_CANAL_C+6),A
                            284 ;	TABLA_DATOS_CANAL_SFX
   0090 21rB3r00      [10]  285 	LD	HL,#_SELECT_CANAL_A
   0093 22rC8r00      [16]  286 	LD	(#_TABLA_DATOS_CANAL_SFX),HL
   0096 21rBAr00      [10]  287 	LD	HL,#_SELECT_CANAL_B
   0099 22rCAr00      [16]  288 	LD	(#_TABLA_DATOS_CANAL_SFX+2),HL
   009C 21rC1r00      [10]  289 	LD	HL,#_SELECT_CANAL_C
   009F 22rCCr00      [16]  290 	LD	(#_TABLA_DATOS_CANAL_SFX+4),HL
   00A2 DD E1         [14]  291 	pop	IX
   00A4 C9            [10]  292 	ret
                            293 ;src\WYZplayer.c:299: void WYZpause()
                            294 ;	---------------------------------
                            295 ; Function WYZpause
                            296 ; ---------------------------------
   00A5                     297 _WYZpause::
                            298 ;src\WYZplayer.c:329: __endasm;
   00A5                     299 	PLAYER_OFF:
                            300 ;	XOR A
                            301 ;	LD [INTERR],A
                            302 ;	LD [FADE],A ;solo si hay fade out
   00A5 21r00r00      [10]  303 	LD	HL,#_WYZstate
   00A8 CB 8E         [15]  304 	RES	1,(HL)
   00AA                     305 	CLEAR_PSG_BUFFER:
   00AA AF            [ 4]  306 	XOR	A
   00AB 21r49r00      [10]  307 	LD	HL,#_PSG_REG
   00AE 11r4Ar00      [10]  308 	LD	DE,#_PSG_REG+1
   00B1 01 0E 00      [10]  309 	LD	BC,#14
   00B4 77            [ 7]  310 	LD	(HL),A
   00B5 ED B0         [21]  311 	LDIR
   00B7 3E B8         [ 7]  312 	LD	A,#0b10111000 ; **** POR SI ACASO ****
   00B9 32r50r00      [13]  313 	LD	(#_PSG_REG+7),A
   00BC 21r49r00      [10]  314 	LD	HL,#_PSG_REG
   00BF 11r59r00      [10]  315 	LD	DE,#_PSG_REG_SEC
   00C2 01 0E 00      [10]  316 	LD	BC,#14
   00C5 ED B0         [21]  317 	LDIR
   00C7 CDr0Dr01      [17]  318 	CALL	ROUT
   00CA C9            [10]  319 	RET
   00CB C9            [10]  320 	ret
                            321 ;src\WYZplayer.c:344: void WYZresume() __naked
                            322 ;	---------------------------------
                            323 ; Function WYZresume
                            324 ; ---------------------------------
   00CC                     325 _WYZresume::
                            326 ;src\WYZplayer.c:351: __endasm;
   00CC 21r00r00      [10]  327 	LD	HL,#_WYZstate
   00CF CB CE         [15]  328 	SET	1,(HL) ;PLAYER ON
   00D1 C9            [10]  329 	RET
                            330 ;src\WYZplayer.c:365: void WYZsetLoop(char mode) __naked
                            331 ;	---------------------------------
                            332 ; Function WYZsetLoop
                            333 ; ---------------------------------
   00D2                     334 _WYZsetLoop::
                            335 ;src\WYZplayer.c:389: __endasm;
   00D2 DD E5         [15]  336 	push	IX
   00D4 DD 21 00 00   [14]  337 	ld	IX,#0
   00D8 DD 39         [15]  338 	add	IX,SP
   00DA 21r00r00      [10]  339 	LD	HL,#_WYZstate
   00DD DD 7E 04      [19]  340 	ld	A,4(IX)
   00E0 B7            [ 4]  341 	or	A
   00E1 28 05         [12]  342 	jr	Z,resetLOOP
   00E3 CB E6         [15]  343 	SET	4,(HL) ;LOOP ON
   00E5 DD E1         [14]  344 	pop	IX
   00E7 C9            [10]  345 	RET
   00E8                     346 	resetLOOP:
   00E8 CB A6         [15]  347 	RES	4,(HL)
   00EA DD E1         [14]  348 	pop	IX
   00EC C9            [10]  349 	RET
                            350 ;src\WYZplayer.c:403: void WYZplayFX(char numSound) __naked
                            351 ;	---------------------------------
                            352 ; Function WYZplayFX
                            353 ; ---------------------------------
   00ED                     354 _WYZplayFX::
                            355 ;src\WYZplayer.c:433: __endasm;
   00ED DD E5         [15]  356 	push	IX
   00EF DD 21 00 00   [14]  357 	ld	IX,#0
   00F3 DD 39         [15]  358 	add	IX,sp
   00F5 DD 7E 04      [19]  359 	LD	A,4(IX)
   00F8 CDrFEr00      [17]  360 	CALL	INICIA_SONIDO
   00FB DD E1         [14]  361 	pop	IX
   00FD C9            [10]  362 	ret
                            363 ;INICIA	EL SONIDO No [A]
   00FE                     364 	INICIA_SONIDO:
                            365 ;CP	8 ;SFX SPEECH
                            366 ;JP	Z,SLOOP
   00FE 2ArAFr00      [16]  367 	LD	HL,(#_TABLA_SONIDOS) ;(v 360) HL,TABLA_SONIDOS
   0101 CDrF0r05      [17]  368 	CALL	EXT_WORD
   0104 22r47r00      [16]  369 	LD	(#_PUNTERO_SONIDO),HL
   0107 21r00r00      [10]  370 	LD	HL,#_WYZstate
   010A CB D6         [15]  371 	SET	2,(HL)
   010C C9            [10]  372 	RET
                            373 ;src\WYZplayer.c:451: void WYZplayAY() __naked
                            374 ;	---------------------------------
                            375 ; Function WYZplayAY
                            376 ; ---------------------------------
   010D                     377 _WYZplayAY::
                            378 ;src\WYZplayer.c:486: __endasm;
   010D                     379 	ROUT:
   010D 3Ar56r00      [13]  380 	LD	A,(#_PSG_REG+13)
   0110 A7            [ 4]  381 	AND	A ;ES CERO?
   0111 28 03         [12]  382 	JR	Z,NO_BACKUP_ENVOLVENTE
   0113 32r6Ar00      [13]  383 	LD	(#_ENVOLVENTE_BACK),A ;08.13 / GUARDA LA ENVOLVENTE EN EL BACKUP
   0116                     384 	NO_BACKUP_ENVOLVENTE:
   0116 AF            [ 4]  385 	XOR	A
   0117 0E A0         [ 7]  386 	LD	C,#0xA0
   0119 21r59r00      [10]  387 	LD	HL,#_PSG_REG_SEC
   011C                     388 	LOUT:
   011C ED 79         [12]  389 	OUT	(C),A
   011E 0C            [ 4]  390 	INC	C
   011F ED A3         [16]  391 	OUTI
   0121 0D            [ 4]  392 	DEC	C
   0122 3C            [ 4]  393 	INC	A
   0123 FE 0D         [ 7]  394 	CP	#13
   0125 20 F5         [12]  395 	JR	NZ,LOUT
   0127 ED 79         [12]  396 	OUT	(C),A
   0129 7E            [ 7]  397 	LD	A,(HL)
   012A A7            [ 4]  398 	AND	A
   012B C8            [11]  399 	RET	Z
   012C 0C            [ 4]  400 	INC	C
   012D ED 79         [12]  401 	OUT	(C),A
   012F AF            [ 4]  402 	XOR	A
   0130 32r66r00      [13]  403 	LD	(#_PSG_REG_SEC+13),A
   0133 32r56r00      [13]  404 	LD	(#_PSG_REG+13),A
   0136 C9            [10]  405 	RET
                            406 ;src\WYZplayer.c:504: void WYZloadSong(char numSong) __naked
                            407 ;	---------------------------------
                            408 ; Function WYZloadSong
                            409 ; ---------------------------------
   0137                     410 _WYZloadSong::
                            411 ;src\WYZplayer.c:694: __endasm;
   0137 DD E5         [15]  412 	push	IX
   0139 DD 21 00 00   [14]  413 	ld	IX,#0
   013D DD 39         [15]  414 	add	IX,sp
   013F DD 7E 04      [19]  415 	LD	A,4(IX)
   0142 CDr48r01      [17]  416 	CALL	CARGA_CANCION
   0145 DD E1         [14]  417 	pop	IX
   0147 C9            [10]  418 	ret
                            419 ;CARGA	UNA CANCION
                            420 ;IN:[A]=Nº	DE CANCION
   0148                     421 	CARGA_CANCION:
                            422 ;LD	HL,#_SONG
   0148 32r01r00      [13]  423 	LD	(#_SONG),A ;Nº A
   014B 21r00r00      [10]  424 	LD	HL,#_WYZstate ;CARGA CANCION
   014E CB CE         [15]  425 	SET	1,(HL) ;REPRODUCE CANCION
                            426 ;DECODIFICAR
                            427 ;IN->	WYZstate 0 ON
                            428 ;	SONG
                            429 ;CARGA	CANCION SI/NO
   0150                     430 	DECODE_SONG:
   0150 3Ar01r00      [13]  431 	LD	A,(#_SONG)
                            432 ;LEE	CABECERA DE LA CANCION
                            433 ;BYTE	0=TEMPO
   0153 2ArABr00      [16]  434 	LD	HL,(#_TABLA_SONG) ;(v 360) HL,_TABLA_SONG
   0156 CDrF0r05      [17]  435 	CALL	EXT_WORD
   0159 7E            [ 7]  436 	LD	A,(HL)
   015A 32r02r00      [13]  437 	LD	(#_TEMPO),A
   015D 3D            [ 4]  438 	DEC	A
   015E 32r03r00      [13]  439 	LD	(#_TTEMPO),A
                            440 ;HEADER	BYTE 1
                            441 ;[-|-|-|-|	3-1 | 0 ]
                            442 ;[-|-|-|-|FX	CHN|LOOP]
   0161 23            [ 6]  443 	INC	HL ;LOOP 1=ON/0=OFF?
   0162 7E            [ 7]  444 	LD	A,(HL)
   0163 CB 47         [ 8]  445 	BIT	0,A
   0165 28 07         [12]  446 	JR	Z,NPTJP0
   0167 E5            [11]  447 	PUSH	HL
   0168 21r00r00      [10]  448 	LD	HL,#_WYZstate
   016B CB E6         [15]  449 	SET	4,(HL)
   016D E1            [10]  450 	POP	HL
                            451 ;SELECCION	DEL CANAL DE EFECTOS DE RITMO
   016E                     452 	NPTJP0:
   016E E6 06         [ 7]  453 	AND	#0b00000110
   0170 1F            [ 4]  454 	RRA
                            455 ;LD	[SELECT_CANAL_P],A
   0171 E5            [11]  456 	PUSH	HL
   0172 21rC8r00      [10]  457 	LD	HL,#_TABLA_DATOS_CANAL_SFX
   0175 CDrF0r05      [17]  458 	CALL	EXT_WORD
   0178 E5            [11]  459 	PUSH	HL
   0179 DD E1         [14]  460 	POP	IX
   017B DD 5E 00      [19]  461 	LD	E,0(IX)
   017E DD 56 01      [19]  462 	LD	D,1(IX)
   0181 ED 53r3Er00   [20]  463 	LD	(#_SFX_L),DE
   0185 DD 5E 02      [19]  464 	LD	E,2(IX)
   0188 DD 56 03      [19]  465 	LD	D,3(IX)
   018B ED 53r40r00   [20]  466 	LD	(#_SFX_H),DE
   018F DD 5E 04      [19]  467 	LD	E,4(IX)
   0192 DD 56 05      [19]  468 	LD	D,5(IX)
   0195 ED 53r42r00   [20]  469 	LD	(#_SFX_V),DE
   0199 DD 7E 06      [19]  470 	LD	A,6(IX)
   019C 32r44r00      [13]  471 	LD	(#_SFX_MIX),A
   019F E1            [10]  472 	POP	HL
   01A0 23            [ 6]  473 	INC	HL ;2 BYTES RESERVADOS
   01A1 23            [ 6]  474 	INC	HL
   01A2 23            [ 6]  475 	INC	HL
                            476 ;BUSCA	Y GUARDA INICIO DE LOS CANALES EN EL MODULO MUS (OPTIMIZAR)
                            477 ;AÑADE	OFFSET DEL LOOP
   01A3 E5            [11]  478 	PUSH	HL ;IX INICIO OFFSETS LOOP POR CANAL
   01A4 DD E1         [14]  479 	POP	IX
   01A6 11 08 00      [10]  480 	LD	DE,#0x0008 ;HASTA INICIO DEL CANAL A
   01A9 19            [11]  481 	ADD	HL,DE
   01AA 22r1Cr00      [16]  482 	LD	(#_PUNTERO_P_DECA),HL ;GUARDA PUNTERO INICIO CANAL
   01AD DD 5E 00      [19]  483 	LD	E,(IX)
   01B0 DD 56 01      [19]  484 	LD	D,1(IX)
   01B3 19            [11]  485 	ADD	HL,DE
   01B4 22r2Er00      [16]  486 	LD	(#_PUNTERO_L_DECA),HL ;GUARDA PUNTERO INICIO LOOP
   01B7 CDr2Cr02      [17]  487 	CALL	BGICMODBC1
   01BA 22r1Er00      [16]  488 	LD	(#_PUNTERO_P_DECB),HL
   01BD DD 5E 02      [19]  489 	LD	E,2(IX)
   01C0 DD 56 03      [19]  490 	LD	D,3(IX)
   01C3 19            [11]  491 	ADD	HL,DE
   01C4 22r30r00      [16]  492 	LD	(#_PUNTERO_L_DECB),HL
   01C7 CDr2Cr02      [17]  493 	CALL	BGICMODBC1
   01CA 22r20r00      [16]  494 	LD	(#_PUNTERO_P_DECC),HL
   01CD DD 5E 04      [19]  495 	LD	E,4(IX)
   01D0 DD 56 05      [19]  496 	LD	D,5(IX)
   01D3 19            [11]  497 	ADD	HL,DE
   01D4 22r32r00      [16]  498 	LD	(#_PUNTERO_L_DECC),HL
   01D7 CDr2Cr02      [17]  499 	CALL	BGICMODBC1
   01DA 22r38r00      [16]  500 	LD	(#_PUNTERO_P_DECP),HL
   01DD DD 5E 06      [19]  501 	LD	E,6(IX)
   01E0 DD 56 07      [19]  502 	LD	D,7(IX)
   01E3 19            [11]  503 	ADD	HL,DE
   01E4 22r3Cr00      [16]  504 	LD	(#_PUNTERO_L_DECP),HL
                            505 ;LEE	DATOS DE LAS NOTAS
                            506 ;[|][|||||]	LONGITUD\NOTA
   01E7                     507 	INIT_DECODER:
   01E7 ED 5Br0Ar00   [20]  508 	LD	DE,(#_CANAL_A)
   01EB ED 53r04r00   [20]  509 	LD	(#_PUNTERO_A),DE
   01EF 2Ar1Cr00      [16]  510 	LD	HL,(#_PUNTERO_P_DECA)
   01F2 CDr3Br03      [17]  511 	CALL	DECODE_CANAL ;CANAL A
   01F5 22r22r00      [16]  512 	LD	(#_PUNTERO_DECA),HL
   01F8 ED 5Br0Cr00   [20]  513 	LD	DE,(#_CANAL_B)
   01FC ED 53r06r00   [20]  514 	LD	(#_PUNTERO_B),DE
   0200 2Ar1Er00      [16]  515 	LD	HL,(#_PUNTERO_P_DECB)
   0203 CDr3Br03      [17]  516 	CALL	DECODE_CANAL ;CANAL B
   0206 22r24r00      [16]  517 	LD	(#_PUNTERO_DECB),HL
   0209 ED 5Br0Er00   [20]  518 	LD	DE,(#_CANAL_C)
   020D ED 53r08r00   [20]  519 	LD	(#_PUNTERO_C),DE
   0211 2Ar20r00      [16]  520 	LD	HL,(#_PUNTERO_P_DECC)
   0214 CDr3Br03      [17]  521 	CALL	DECODE_CANAL ;CANAL C
   0217 22r26r00      [16]  522 	LD	(#_PUNTERO_DECC),HL
   021A ED 5Br36r00   [20]  523 	LD	DE,(#_CANAL_P)
   021E ED 53r34r00   [20]  524 	LD	(#_PUNTERO_P),DE
   0222 2Ar38r00      [16]  525 	LD	HL,(#_PUNTERO_P_DECP)
   0225 CDr3Br03      [17]  526 	CALL	DECODE_CANAL ;CANAL P (FX)
   0228 22r3Ar00      [16]  527 	LD	(#_PUNTERO_DECP),HL
   022B C9            [10]  528 	RET
                            529 ;BUSCA	INICIO DEL CANAL
   022C                     530 	BGICMODBC1:
   022C AF            [ 4]  531 	XOR	A ;BUSCA EL BYTE 0
   022D 1E 3F         [ 7]  532 	LD	E,#0x3F ;CODIGO INSTRUMENTO 0
   022F 06 FF         [ 7]  533 	LD	B,#0xFF ;EL MODULO DEBE TENER UNA LONGITUD MENOR DE $FF00 ... o_O!
   0231 ED B1         [21]  534 	CPIR
   0233 2B            [ 6]  535 	DEC	HL
   0234 2B            [ 6]  536 	DEC	HL
   0235 7B            [ 4]  537 	LD	A,E ;ES EL INSTRUMENTO 0??
   0236 BE            [ 7]  538 	CP	(HL)
   0237 23            [ 6]  539 	INC	HL
   0238 23            [ 6]  540 	INC	HL
   0239 28 F1         [12]  541 	JR	Z,BGICMODBC1
   023B 2B            [ 6]  542 	DEC	HL
   023C 2B            [ 6]  543 	DEC	HL
   023D 2B            [ 6]  544 	DEC	HL
   023E 7B            [ 4]  545 	LD	A,E ;ES VOLUMEN 0??
   023F BE            [ 7]  546 	CP	(HL)
   0240 23            [ 6]  547 	INC	HL
   0241 23            [ 6]  548 	INC	HL
   0242 23            [ 6]  549 	INC	HL
   0243 28 E7         [12]  550 	JR	Z,BGICMODBC1
   0245 C9            [10]  551 	RET
                            552 ;src\WYZplayer.c:714: void WYZdecode() __naked
                            553 ;	---------------------------------
                            554 ; Function WYZdecode
                            555 ; ---------------------------------
   0246                     556 _WYZdecode::
                            557 ;src\WYZplayer.c:1407: __endasm;
   0246                     558 	INICIO:
                            559 ;	push IX
                            560 ;	CALL ROUT
                            561 ;	CALL MIXER
   0246 21r49r00      [10]  562 	LD	HL,#_PSG_REG
   0249 11r59r00      [10]  563 	LD	DE,#_PSG_REG_SEC
   024C 01 0E 00      [10]  564 	LD	BC,#14
   024F ED B0         [21]  565 	LDIR
   0251 CDr58r02      [17]  566 	CALL	REPRODUCE_SONIDO
   0254 CDrCDr02      [17]  567 	CALL	PLAY
                            568 ;	pop IX
   0257 C9            [10]  569 	RET
                            570 ;REPRODUCE	EFECTOS DE SONIDO
   0258                     571 	REPRODUCE_SONIDO:
   0258 21r00r00      [10]  572 	LD	HL,#_WYZstate
   025B CB 56         [12]  573 	BIT	2,(HL) ;ESTA ACTIVADO EL EFECTO?
   025D C8            [11]  574 	RET	Z
   025E 2Ar47r00      [16]  575 	LD	HL,(#_PUNTERO_SONIDO)
   0261 7E            [ 7]  576 	LD	A,(HL)
   0262 FE FF         [ 7]  577 	CP	#0xFF
   0264 28 53         [12]  578 	JR	Z,FIN_SONIDO
   0266 ED 5Br3Er00   [20]  579 	LD	DE,(#_SFX_L)
   026A 12            [ 7]  580 	LD	(DE),A
   026B 23            [ 6]  581 	INC	HL
   026C 7E            [ 7]  582 	LD	A,(HL)
   026D 0F            [ 4]  583 	RRCA
   026E 0F            [ 4]  584 	RRCA
   026F 0F            [ 4]  585 	RRCA
   0270 0F            [ 4]  586 	RRCA
   0271 E6 0F         [ 7]  587 	AND	#0b00001111
   0273 ED 5Br40r00   [20]  588 	LD	DE,(#_SFX_H)
   0277 12            [ 7]  589 	LD	(DE),A
   0278 7E            [ 7]  590 	LD	A,(HL)
   0279 E6 0F         [ 7]  591 	AND	#0b00001111
   027B ED 5Br42r00   [20]  592 	LD	DE,(#_SFX_V)
   027F 12            [ 7]  593 	LD	(DE),A
   0280 23            [ 6]  594 	INC	HL
   0281 7E            [ 7]  595 	LD	A,(HL)
   0282 47            [ 4]  596 	LD	B,A
   0283 CB 7F         [ 8]  597 	BIT	7,A ;09.08.13 BIT MAS SIGINIFICATIVO ACTIVA ENVOLVENTES
   0285 28 16         [12]  598 	JR	Z,NO_ENVOLVENTES_SONIDO
   0287 3E 12         [ 7]  599 	LD	A,#0x12
   0289 12            [ 7]  600 	LD	(DE),A
   028A 23            [ 6]  601 	INC	HL
   028B 7E            [ 7]  602 	LD	A,(HL)
   028C 32r64r00      [13]  603 	LD	(#_PSG_REG_SEC+11),A
   028F 23            [ 6]  604 	INC	HL
   0290 7E            [ 7]  605 	LD	A,(HL)
   0291 32r65r00      [13]  606 	LD	(#_PSG_REG_SEC+12),A
   0294 23            [ 6]  607 	INC	HL
   0295 7E            [ 7]  608 	LD	A,(HL)
   0296 FE 01         [ 7]  609 	CP	#1
   0298 28 03         [12]  610 	JR	Z,NO_ENVOLVENTES_SONIDO ;NO ESCRIBE LA ENVOLVENTE SI SU VALOR ES 1
   029A 32r66r00      [13]  611 	LD	(#_PSG_REG_SEC+13),A
   029D                     612 	NO_ENVOLVENTES_SONIDO:
   029D 78            [ 4]  613 	LD	A,B
   029E CB BF         [ 8]  614 	RES	7,A
   02A0 A7            [ 4]  615 	AND	A
   02A1 28 08         [12]  616 	JR	Z,NO_RUIDO
   02A3 32r5Fr00      [13]  617 	LD	(#_PSG_REG_SEC+6),A
   02A6 3Ar44r00      [13]  618 	LD	A,(#_SFX_MIX)
   02A9 18 06         [12]  619 	JR	SI_RUIDO
   02AB                     620 	NO_RUIDO:
   02AB AF            [ 4]  621 	XOR	A
   02AC 32r5Fr00      [13]  622 	LD	(#_PSG_REG_SEC+6),A
   02AF 3E B8         [ 7]  623 	LD	A,#0b10111000
   02B1                     624 	SI_RUIDO:
   02B1 32r60r00      [13]  625 	LD	(#_PSG_REG_SEC+7),A
   02B4 23            [ 6]  626 	INC	HL
   02B5 22r47r00      [16]  627 	LD	(#_PUNTERO_SONIDO),HL
   02B8 C9            [10]  628 	RET
   02B9                     629 	FIN_SONIDO:
   02B9 21r00r00      [10]  630 	LD	HL,#_WYZstate
   02BC CB 96         [15]  631 	RES	2,(HL)
   02BE 3Ar6Ar00      [13]  632 	LD	A,(#_ENVOLVENTE_BACK) ;NO RESTAURA LA ENVOLVENTE SI ES 0
   02C1 A7            [ 4]  633 	AND	A
   02C2 28 03         [12]  634 	JR	Z,FIN_NOPLAYER
                            635 ;xor	a
   02C4 32r66r00      [13]  636 	LD	(#_PSG_REG_SEC+13),A ;08.13 RESTAURA LA ENVOLVENTE TRAS EL SFX
   02C7                     637 	FIN_NOPLAYER:
   02C7 3E B8         [ 7]  638 	LD	A,#0b10111000
   02C9 32r60r00      [13]  639 	LD	(#_PSG_REG_SEC+7),A
   02CC C9            [10]  640 	RET
   02CD                     641 	PLAY:
   02CD 21r00r00      [10]  642 	LD	HL,#_WYZstate ;PLAY BIT 1 ON?
   02D0 CB 4E         [12]  643 	BIT	1,(HL)
   02D2 C8            [11]  644 	RET	Z
                            645 ;TEMPO
   02D3 21r03r00      [10]  646 	LD	HL,#_TTEMPO ;CONTADOR TEMPO
   02D6 34            [11]  647 	INC	(HL)
   02D7 3Ar02r00      [13]  648 	LD	A,(#_TEMPO)
   02DA BE            [ 7]  649 	CP	(HL)
   02DB 20 33         [12]  650 	JR	NZ,PAUTAS
   02DD 36 00         [10]  651 	LD	(HL),#0
                            652 ;INTERPRETA
   02DF FD 21r49r00   [14]  653 	LD	IY,#_PSG_REG
   02E3 DD 21r04r00   [14]  654 	LD	IX,#_PUNTERO_A
   02E7 01r51r00      [10]  655 	LD	BC,#_PSG_REG+8
   02EA CDrACr03      [17]  656 	CALL	LOCALIZA_NOTA
   02ED FD 21r4Br00   [14]  657 	LD	IY,#_PSG_REG+2
   02F1 DD 21r06r00   [14]  658 	LD	IX,#_PUNTERO_B
   02F5 01r52r00      [10]  659 	LD	BC,#_PSG_REG+9
   02F8 CDrACr03      [17]  660 	CALL	LOCALIZA_NOTA
   02FB FD 21r4Dr00   [14]  661 	LD	IY,#_PSG_REG+4
   02FF DD 21r08r00   [14]  662 	LD	IX,#_PUNTERO_C
   0303 01r53r00      [10]  663 	LD	BC,#_PSG_REG+10
   0306 CDrACr03      [17]  664 	CALL	LOCALIZA_NOTA
   0309 DD 21r34r00   [14]  665 	LD	IX,#_PUNTERO_P ;EL CANAL DE EFECTOS ENMASCARA OTRO CANAL
   030D CDrA8r04      [17]  666 	CALL	LOCALIZA_EFECTO
   0310                     667 	PAUTAS:
   0310 FD 21r49r00   [14]  668 	LD	IY,#_PSG_REG+0
   0314 DD 21r10r00   [14]  669 	LD	IX,#_PUNTERO_P_A
   0318 21r51r00      [10]  670 	LD	HL,#_PSG_REG+8
   031B CDrF0r04      [17]  671 	CALL	PAUTA ;PAUTA CANAL A
   031E FD 21r4Br00   [14]  672 	LD	IY,#_PSG_REG+2
   0322 DD 21r12r00   [14]  673 	LD	IX,#_PUNTERO_P_B
   0326 21r52r00      [10]  674 	LD	HL,#_PSG_REG+9
   0329 CDrF0r04      [17]  675 	CALL	PAUTA ;PAUTA CANAL B
   032C FD 21r4Dr00   [14]  676 	LD	IY,#_PSG_REG+4
   0330 DD 21r14r00   [14]  677 	LD	IX,#_PUNTERO_P_C
   0334 21r53r00      [10]  678 	LD	HL,#_PSG_REG+10
   0337 CDrF0r04      [17]  679 	CALL	PAUTA ;PAUTA CANAL C
   033A C9            [10]  680 	RET
                            681 ;DECODIFICA	NOTAS DE UN CANAL
                            682 ;IN	(DE)=DIRECCION DESTINO
                            683 ;NOTA=0	FIN CANAL
                            684 ;NOTA=1	SILENCIO
                            685 ;NOTA=2	PUNTILLO
                            686 ;NOTA=3	COMANDO I
   033B                     687 	DECODE_CANAL:
   033B 7E            [ 7]  688 	LD	A,(HL)
   033C A7            [ 4]  689 	AND	A ;FIN DEL CANAL?
   033D 28 55         [12]  690 	JR	Z,FIN_DEC_CANAL
   033F CDr99r03      [17]  691 	CALL	GETLEN
   0342 FE 01         [ 7]  692 	CP	#0b00000001 ;ES SILENCIO?
   0344 20 04         [12]  693 	JR	NZ,NO_SILENCIO
   0346 CB F7         [ 8]  694 	SET	6,A
   0348 18 3D         [12]  695 	JR	NO_MODIFICA
   034A                     696 	NO_SILENCIO:
   034A FE 3E         [ 7]  697 	CP	#0b00111110 ;ES PUNTILLO?
   034C 20 06         [12]  698 	JR	NZ,NO_PUNTILLO
   034E B7            [ 4]  699 	OR	A
   034F CB 08         [ 8]  700 	RRC	B
   0351 AF            [ 4]  701 	XOR	A
   0352 18 33         [12]  702 	JR	NO_MODIFICA
   0354                     703 	NO_PUNTILLO:
   0354 FE 3F         [ 7]  704 	CP	#0b00111111 ;ES COMANDO?
   0356 20 2F         [12]  705 	JR	NZ,NO_MODIFICA
   0358 CB 40         [ 8]  706 	BIT	0,B ;COMADO=INSTRUMENTO?
   035A 28 0F         [12]  707 	JR	Z,NO_INSTRUMENTO
   035C 3E C1         [ 7]  708 	LD	A,#0b11000001 ;CODIGO DE INSTRUMENTO
   035E 12            [ 7]  709 	LD	(DE),A
   035F 23            [ 6]  710 	INC	HL
   0360 13            [ 6]  711 	INC	DE
   0361 7E            [ 7]  712 	LD	A,(HL) ;Nº DE INSTRUMENTO
   0362 12            [ 7]  713 	LD	(DE),A
   0363 13            [ 6]  714 	INC	DE
   0364 23            [ 6]  715 	INC	HL
   0365 7E            [ 7]  716 	LD	A,(HL) ;VOLUMEN RELATIVO DEL INSTRUMENTO
   0366 12            [ 7]  717 	LD	(DE),A
   0367 13            [ 6]  718 	INC	DE
   0368 23            [ 6]  719 	INC	HL
   0369 18 D0         [12]  720 	JR	DECODE_CANAL
   036B                     721 	NO_INSTRUMENTO:
   036B CB 50         [ 8]  722 	BIT	2,B
   036D 28 0B         [12]  723 	JR	Z,NO_ENVOLVENTE
   036F 3E C4         [ 7]  724 	LD	A,#0b11000100 ;CODIGO ENVOLVENTE
   0371 12            [ 7]  725 	LD	(DE),A
   0372 13            [ 6]  726 	INC	DE
   0373 23            [ 6]  727 	INC	HL
   0374 7E            [ 7]  728 	LD	A,(HL)
   0375 12            [ 7]  729 	LD	(DE),A
   0376 13            [ 6]  730 	INC	DE
   0377 23            [ 6]  731 	INC	HL
   0378 18 C1         [12]  732 	JR	DECODE_CANAL
   037A                     733 	NO_ENVOLVENTE:
   037A CB 48         [ 8]  734 	BIT	1,B
   037C 28 09         [12]  735 	JR	Z,NO_MODIFICA
   037E 3E C2         [ 7]  736 	LD	A,#0b11000010 ;CODIGO EFECTO
   0380 12            [ 7]  737 	LD	(DE),A
   0381 23            [ 6]  738 	INC	HL
   0382 13            [ 6]  739 	INC	DE
   0383 7E            [ 7]  740 	LD	A,(HL)
   0384 CDr99r03      [17]  741 	CALL	GETLEN
   0387                     742 	NO_MODIFICA:
   0387 12            [ 7]  743 	LD	(DE),A
   0388 13            [ 6]  744 	INC	DE
   0389 AF            [ 4]  745 	XOR	A
   038A 10 FB         [13]  746 	DJNZ	NO_MODIFICA
   038C CB FF         [ 8]  747 	SET	7,A
   038E CB C7         [ 8]  748 	SET	0,A
   0390 12            [ 7]  749 	LD	(DE),A
   0391 13            [ 6]  750 	INC	DE
   0392 23            [ 6]  751 	INC	HL
   0393 C9            [10]  752 	RET	;** JR DECODE_CANAL
   0394                     753 	FIN_DEC_CANAL:
   0394 CB FF         [ 8]  754 	SET	7,A
   0396 12            [ 7]  755 	LD	(DE),A
   0397 13            [ 6]  756 	INC	DE
   0398 C9            [10]  757 	RET
   0399                     758 	GETLEN:
   0399 47            [ 4]  759 	LD	B,A
   039A E6 3F         [ 7]  760 	AND	#0b00111111
   039C F5            [11]  761 	PUSH	AF
   039D 78            [ 4]  762 	LD	A,B
   039E E6 C0         [ 7]  763 	AND	#0b11000000
   03A0 07            [ 4]  764 	RLCA
   03A1 07            [ 4]  765 	RLCA
   03A2 3C            [ 4]  766 	INC	A
   03A3 47            [ 4]  767 	LD	B,A
   03A4 3E 80         [ 7]  768 	LD	A,#0b10000000
   03A6                     769 	DCBC0:
   03A6 07            [ 4]  770 	RLCA
   03A7 10 FD         [13]  771 	DJNZ	DCBC0
   03A9 47            [ 4]  772 	LD	B,A
   03AA F1            [10]  773 	pop	AF
   03AB C9            [10]  774 	ret
                            775 ;LOCALIZA	NOTA CANAL A
                            776 ;IN	[PUNTERO_A]
                            777 ;LOCALIZA	NOTA CANAL A
                            778 ;IN	[PUNTERO_A]
   03AC                     779 	LOCALIZA_NOTA:
   03AC DD 6E 00      [19]  780 	LD	L,_PUNTERO_A - _PUNTERO_A(IX) ;HL=[PUNTERO_A_C_B]
   03AF DD 66 01      [19]  781 	LD	H,_PUNTERO_A - _PUNTERO_A+1(IX) ;
   03B2 7E            [ 7]  782 	LD	A,(HL)
   03B3 E6 C0         [ 7]  783 	AND	#0b11000000 ;COMANDO?
   03B5 FE C0         [ 7]  784 	CP	#0b11000000
   03B7 20 6B         [12]  785 	JR	NZ,LNJP0
                            786 ;BIT[0]=INSTRUMENTO
   03B9                     787 	COMANDOS:
   03B9 7E            [ 7]  788 	LD	A,(HL)
   03BA CB 47         [ 8]  789 	BIT	0,A ;INSTRUMENTO
   03BC 28 40         [12]  790 	JR	Z,COM_EFECTO
   03BE 23            [ 6]  791 	INC	HL
   03BF 7E            [ 7]  792 	LD	A,(HL) ;Nº DE PAUTA
   03C0 23            [ 6]  793 	INC	HL
   03C1 5E            [ 7]  794 	LD	E,(HL)
   03C2 E5            [11]  795 	PUSH	HL ;TEMPO
   03C3 21r02r00      [10]  796 	LD	HL,#_TEMPO
   03C6 CB 6B         [ 8]  797 	BIT	5,E
   03C8 28 01         [12]  798 	JR	Z,NO_DEC_TEMPO
   03CA 35            [11]  799 	DEC	(HL)
   03CB                     800 	NO_DEC_TEMPO:
   03CB CB 73         [ 8]  801 	BIT	6,E
   03CD 28 01         [12]  802 	JR	Z,NO_INC_TEMPO
   03CF 34            [11]  803 	INC	(HL)
   03D0                     804 	NO_INC_TEMPO:
   03D0 CB AB         [ 8]  805 	RES	5,E ;SIEMPRE RESETEA LOS BITS DE TEMPO
   03D2 CB B3         [ 8]  806 	RES	6,E
   03D4 E1            [10]  807 	POP	HL
   03D5 DD 73 25      [19]  808 	LD	_VOL_INST_A - _PUNTERO_A(IX),E ;REGISTRO DEL VOLUMEN RELATIVO
   03D8 23            [ 6]  809 	INC	HL
   03D9 DD 75 00      [19]  810 	LD	_PUNTERO_A - _PUNTERO_A(IX),L ;
   03DC DD 74 01      [19]  811 	LD	_PUNTERO_A - _PUNTERO_A+1(IX),H ;
   03DF 2ArADr00      [16]  812 	LD	HL,(#_TABLA_PAUTAS) ;(v sdcc) HL,#_TABLA_PAUTAS
   03E2 CDrF0r05      [17]  813 	CALL	EXT_WORD
   03E5 DD 75 12      [19]  814 	LD	_PUNTERO_P_A0 - _PUNTERO_A(IX),L
   03E8 DD 74 13      [19]  815 	LD	_PUNTERO_P_A0 - _PUNTERO_A+1(IX),H
   03EB DD 75 0C      [19]  816 	LD	_PUNTERO_P_A - _PUNTERO_A(IX),L
   03EE DD 74 0D      [19]  817 	LD	_PUNTERO_P_A - _PUNTERO_A+1(IX),H
   03F1 69            [ 4]  818 	LD	L,C
   03F2 60            [ 4]  819 	LD	H,B
   03F3 CB A6         [15]  820 	RES	4,(HL) ;APAGA EFECTO ENVOLVENTE
   03F5 AF            [ 4]  821 	XOR	A
   03F6 32r66r00      [13]  822 	LD	(#_PSG_REG_SEC+13),A
   03F9 32r56r00      [13]  823 	LD	(#_PSG_REG+13),A
                            824 ;LD	[ENVOLVENTE_BACK],A ;08.13 RESETEA EL BACKUP DE LA ENVOLVENTE
   03FC 18 AE         [12]  825 	JR	LOCALIZA_NOTA
   03FE                     826 	COM_EFECTO:
   03FE CB 4F         [ 8]  827 	BIT	1,A ;EFECTO DE SONIDO
   0400 28 0D         [12]  828 	JR	Z,COM_ENVOLVENTE
   0402 23            [ 6]  829 	INC	HL
   0403 7E            [ 7]  830 	LD	A,(HL)
   0404 23            [ 6]  831 	INC	HL
   0405 DD 75 00      [19]  832 	LD	_PUNTERO_A - _PUNTERO_A(IX),L ;
   0408 DD 74 01      [19]  833 	LD	_PUNTERO_A - _PUNTERO_A+1(IX),H ;
   040B CDrFEr00      [17]  834 	CALL	INICIA_SONIDO
   040E C9            [10]  835 	RET
   040F                     836 	COM_ENVOLVENTE:
   040F CB 57         [ 8]  837 	BIT	2,A
   0411 C8            [11]  838 	RET	Z ;IGNORA - ERROR
   0412 23            [ 6]  839 	INC	HL
   0413 7E            [ 7]  840 	LD	A,(HL) ;CARGA CODIGO DE ENVOLVENTE
   0414 32r69r00      [13]  841 	LD	(#_ENVOLVENTE),A
   0417 23            [ 6]  842 	INC	HL
   0418 DD 75 00      [19]  843 	LD	_PUNTERO_A - _PUNTERO_A(IX),L ;
   041B DD 74 01      [19]  844 	LD	_PUNTERO_A - _PUNTERO_A+1(IX),H ;
   041E 69            [ 4]  845 	LD	L,C
   041F 60            [ 4]  846 	LD	H,B
   0420 36 10         [10]  847 	LD	(HL),#0b00010000 ;ENCIENDE EFECTO ENVOLVENTE
   0422 18 88         [12]  848 	JR	LOCALIZA_NOTA
   0424                     849 	LNJP0:
   0424 7E            [ 7]  850 	LD	A,(HL)
   0425 23            [ 6]  851 	INC	HL
   0426 CB 7F         [ 8]  852 	BIT	7,A
   0428 28 3D         [12]  853 	JR	Z,NO_FIN_CANAL_A ;
   042A CB 47         [ 8]  854 	BIT	0,A
   042C 28 20         [12]  855 	JR	Z,FIN_CANAL_A
   042E                     856 	FIN_NOTA_A:
   042E DD 5E 06      [19]  857 	LD	E,_CANAL_A - _PUNTERO_A(IX)
   0431 DD 56 07      [19]  858 	LD	D,_CANAL_A - _PUNTERO_A+1(IX) ;PUNTERO BUFFER AL INICIO
   0434 DD 73 00      [19]  859 	LD	_PUNTERO_A - _PUNTERO_A(IX),E ;
   0437 DD 72 01      [19]  860 	LD	_PUNTERO_A - _PUNTERO_A+1(IX),D ;
   043A DD 6E 1E      [19]  861 	LD	L,_PUNTERO_DECA - _PUNTERO_A(IX) ;CARGA PUNTERO DECODER
   043D DD 66 1F      [19]  862 	LD	H,_PUNTERO_DECA - _PUNTERO_A+1(IX)
   0440 C5            [11]  863 	PUSH	BC
   0441 CDr3Br03      [17]  864 	CALL	DECODE_CANAL ;DECODIFICA CANAL
   0444 C1            [10]  865 	POP	BC
   0445 DD 75 1E      [19]  866 	LD	_PUNTERO_DECA - _PUNTERO_A(IX),L ;GUARDA PUNTERO DECODER
   0448 DD 74 1F      [19]  867 	LD	_PUNTERO_DECA - _PUNTERO_A+1(IX),H
   044B C3rACr03      [10]  868 	JP	LOCALIZA_NOTA
   044E                     869 	FIN_CANAL_A:
   044E 21r00r00      [10]  870 	LD	HL,#_WYZstate ;LOOP?
   0451 CB 66         [12]  871 	BIT	4,(HL)
   0453 20 04         [12]  872 	JR	NZ,FCA_CONT
   0455 F1            [10]  873 	POP	AF
   0456 C3rA5r00      [10]  874 	JP	PLAYER_OFF
   0459                     875 	FCA_CONT:
   0459 DD 6E 2A      [19]  876 	LD	L,_PUNTERO_L_DECA - _PUNTERO_A(IX) ;CARGA PUNTERO INICIAL DECODER
   045C DD 66 2B      [19]  877 	LD	H,_PUNTERO_L_DECA - _PUNTERO_A+1(IX)
   045F DD 75 1E      [19]  878 	LD	_PUNTERO_DECA - _PUNTERO_A(IX),L
   0462 DD 74 1F      [19]  879 	LD	_PUNTERO_DECA - _PUNTERO_A+1(IX),H
   0465 18 C7         [12]  880 	JR	FIN_NOTA_A
   0467                     881 	NO_FIN_CANAL_A:
   0467 DD 75 00      [19]  882 	LD	_PUNTERO_A - _PUNTERO_A(IX),L ;[PUNTERO_A_B_C]=HL GUARDA PUNTERO
   046A DD 74 01      [19]  883 	LD	_PUNTERO_A - _PUNTERO_A+1(IX),H ;
   046D A7            [ 4]  884 	AND	A ;NO REPRODUCE NOTA SI NOTA=0
   046E 28 37         [12]  885 	JR	Z,FIN_RUTINA
   0470 CB 77         [ 8]  886 	BIT	6,A ;SILENCIO?
   0472 28 21         [12]  887 	JR	Z,NO_SILENCIO_A
   0474 0A            [ 7]  888 	LD	A,(BC)
   0475 E6 10         [ 7]  889 	AND	#0b00010000
   0477 20 09         [12]  890 	JR	NZ,SILENCIO_ENVOLVENTE
   0479 AF            [ 4]  891 	XOR	A
   047A 02            [ 7]  892 	LD	(BC),A ;RESET VOLUMEN DEL CORRESPODIENTE CHIP
   047B FD 77 00      [19]  893 	LD	0(IY),A
   047E FD 77 01      [19]  894 	LD	1(IY),A
   0481 C9            [10]  895 	RET
   0482                     896 	SILENCIO_ENVOLVENTE:
   0482 3E FF         [ 7]  897 	LD	A,#0xFF
   0484 32r54r00      [13]  898 	LD	(#_PSG_REG+11),A
   0487 32r55r00      [13]  899 	LD	(#_PSG_REG+12),A
   048A AF            [ 4]  900 	XOR	A
   048B 32r56r00      [13]  901 	LD	(#_PSG_REG+13),A
   048E FD 77 00      [19]  902 	LD	0(IY),A
   0491 FD 77 01      [19]  903 	LD	1(IY),A
   0494 C9            [10]  904 	RET
   0495                     905 	NO_SILENCIO_A:
   0495 DD 77 24      [19]  906 	LD	_REG_NOTA_A - _PUNTERO_A(IX),A ;REGISTRO DE LA NOTA DEL CANAL
   0498 CDr90r05      [17]  907 	CALL	NOTA ;REPRODUCE NOTA
   049B DD 6E 12      [19]  908 	LD	L,_PUNTERO_P_A0 - _PUNTERO_A(IX) ;HL=[PUNTERO_P_A0] RESETEA PAUTA
   049E DD 66 13      [19]  909 	LD	H,_PUNTERO_P_A0 - _PUNTERO_A+1(IX)
   04A1 DD 75 0C      [19]  910 	LD	_PUNTERO_P_A - _PUNTERO_A(IX),L ;[PUNTERO_P_A]=HL
   04A4 DD 74 0D      [19]  911 	LD	_PUNTERO_P_A - _PUNTERO_A+1(IX),H
   04A7                     912 	FIN_RUTINA:
   04A7 C9            [10]  913 	RET
                            914 ;LOCALIZA	EFECTO
                            915 ;IN	HL=[PUNTERO_P]
   04A8                     916 	LOCALIZA_EFECTO:
   04A8 DD 6E 00      [19]  917 	LD	L,0(IX) ;HL=[PUNTERO_P]
   04AB DD 66 01      [19]  918 	LD	H,1(IX)
   04AE 7E            [ 7]  919 	LD	A,(HL)
   04AF FE C2         [ 7]  920 	CP	#0b11000010
   04B1 20 0D         [12]  921 	JR	NZ,LEJP0
   04B3 23            [ 6]  922 	INC	HL
   04B4 7E            [ 7]  923 	LD	A,(HL)
   04B5 23            [ 6]  924 	INC	HL
   04B6 DD 75 00      [19]  925 	LD	0(IX),L
   04B9 DD 74 01      [19]  926 	LD	1(IX),H
   04BC CDrFEr00      [17]  927 	CALL	INICIA_SONIDO
   04BF C9            [10]  928 	RET
   04C0                     929 	LEJP0:
   04C0 23            [ 6]  930 	INC	HL
   04C1 CB 7F         [ 8]  931 	BIT	7,A
   04C3 28 24         [12]  932 	JR	Z,NO_FIN_CANAL_P ;
   04C5 CB 47         [ 8]  933 	BIT	0,A
   04C7 28 18         [12]  934 	JR	Z,FIN_CANAL_P
   04C9                     935 	FIN_NOTA_P:
   04C9 ED 5Br36r00   [20]  936 	LD	DE,(#_CANAL_P)
   04CD DD 73 00      [19]  937 	LD	0(IX),E
   04D0 DD 72 01      [19]  938 	LD	1(IX),D
   04D3 2Ar3Ar00      [16]  939 	LD	HL,(#_PUNTERO_DECP) ;CARGA PUNTERO DECODER
   04D6 C5            [11]  940 	PUSH	BC
   04D7 CDr3Br03      [17]  941 	CALL	DECODE_CANAL ;DECODIFICA CANAL
   04DA C1            [10]  942 	POP	BC
   04DB 22r3Ar00      [16]  943 	LD	(#_PUNTERO_DECP),HL ;GUARDA PUNTERO DECODER
   04DE C3rA8r04      [10]  944 	JP	LOCALIZA_EFECTO
   04E1                     945 	FIN_CANAL_P:
   04E1 2Ar3Cr00      [16]  946 	LD	HL,(#_PUNTERO_L_DECP) ;CARGA PUNTERO INICIAL DECODER
   04E4 22r3Ar00      [16]  947 	LD	(#_PUNTERO_DECP),HL
   04E7 18 E0         [12]  948 	JR	FIN_NOTA_P
   04E9                     949 	NO_FIN_CANAL_P:
   04E9 DD 75 00      [19]  950 	LD	0(IX),L ;[PUNTERO_A_B_C]=HL GUARDA PUNTERO
   04EC DD 74 01      [19]  951 	LD	1(IX),H
   04EF C9            [10]  952 	RET
                            953 ;	PAUTA DE LOS 3 CANALES
                            954 ;	IN:[IX]:PUNTERO DE LA PAUTA
                            955 ;	(HL):REGISTRO DE VOLUMEN
                            956 ;	[IY]:REGISTROS DE FRECUENCIA
                            957 ;	FORMATO PAUTA
                            958 ;	7 6 5 4 3-0 3-0
                            959 ;	BYTE 1 [LOOP|OCT-1|OCT+1|ORNMT|VOL] - BYTE 2 [ | | | |PITCH/NOTA]
   04F0                     960 	PAUTA:
   04F0 CB 66         [12]  961 	BIT	4,(HL) ;SI LA ENVOLVENTE ESTA ACTIVADA NO ACTUA PAUTA
   04F2 C0            [11]  962 	RET	NZ
   04F3 FD 7E 00      [19]  963 	LD	A,0(IY)
   04F6 FD 46 01      [19]  964 	LD	B,1(IY)
   04F9 B0            [ 4]  965 	OR	B
   04FA C8            [11]  966 	RET	Z
   04FB E5            [11]  967 	PUSH	HL
   04FC                     968 	PCAJP4:
   04FC DD 6E 00      [19]  969 	LD	L,0(IX)
   04FF DD 66 01      [19]  970 	LD	H,1(IX)
   0502 7E            [ 7]  971 	LD	A,(HL)
   0503 CB 7F         [ 8]  972 	BIT	7,A ;LOOP / EL RESTO DE BITS NO AFECTAN
   0505 28 09         [12]  973 	JR	Z,PCAJP0
   0507 E6 1F         [ 7]  974 	AND	#0b00011111 ;MÁXIMO LOOP PAUTA [0,32]X2!!!-> PARA ORNAMENTOS
   0509 07            [ 4]  975 	RLCA	;X2
   050A 16 00         [ 7]  976 	LD	D,#0
   050C 5F            [ 4]  977 	LD	E,A
   050D ED 52         [15]  978 	SBC	HL,DE
   050F 7E            [ 7]  979 	LD	A,(HL)
   0510                     980 	PCAJP0:
   0510 CB 77         [ 8]  981 	BIT	6,A ;OCTAVA -1
   0512 28 13         [12]  982 	JR	Z,PCAJP1
   0514 FD 5E 00      [19]  983 	LD	E,0(IY)
   0517 FD 56 01      [19]  984 	LD	D,1(IY)
   051A A7            [ 4]  985 	AND	A
   051B CB 0A         [ 8]  986 	RRC	D
   051D CB 1B         [ 8]  987 	RR	E
   051F FD 73 00      [19]  988 	LD	0(IY),E
   0522 FD 72 01      [19]  989 	LD	1(IY),D
   0525 18 15         [12]  990 	JR	PCAJP2
   0527                     991 	PCAJP1:
   0527 CB 6F         [ 8]  992 	BIT	5,A ;OCTAVA +1
   0529 28 11         [12]  993 	JR	Z,PCAJP2
   052B FD 5E 00      [19]  994 	LD	E,0(IY)
   052E FD 56 01      [19]  995 	LD	D,1(IY)
   0531 A7            [ 4]  996 	AND	A
   0532 CB 03         [ 8]  997 	RLC	E
   0534 CB 12         [ 8]  998 	RL	D
   0536 FD 73 00      [19]  999 	LD	0(IY),E
   0539 FD 72 01      [19] 1000 	LD	1(IY),D
   053C                    1001 	PCAJP2:
   053C 7E            [ 7] 1002 	LD	A,(HL)
   053D CB 67         [ 8] 1003 	BIT	4,A
   053F 20 2D         [12] 1004 	JR	NZ,PCAJP6 ;ORNAMENTOS SELECCIONADOS
                           1005 ;FUNCION	PITCH DE FRECUENCIA
   0541 23            [ 6] 1006 	INC	HL
   0542 E5            [11] 1007 	PUSH	HL
   0543 5F            [ 4] 1008 	LD	E,A
   0544 7E            [ 7] 1009 	LD	A,(HL) ;PITCH DE FRECUENCIA
   0545 6F            [ 4] 1010 	LD	L,A
   0546 A7            [ 4] 1011 	AND	A
   0547 7B            [ 4] 1012 	LD	A,E
   0548 28 30         [12] 1013 	JR	Z,ORNMJP1
   054A FD 7E 00      [19] 1014 	LD	A,0(IY) ;SI LA FRECUENCIA ES 0 NO HAY PITCH
   054D FD 86 01      [19] 1015 	ADD	A,1(IY)
   0550 A7            [ 4] 1016 	AND	A
   0551 7B            [ 4] 1017 	LD	A,E
   0552 28 26         [12] 1018 	JR	Z,ORNMJP1
   0554 CB 7D         [ 8] 1019 	BIT	7,L
   0556 28 04         [12] 1020 	JR	Z,ORNNEG
   0558 26 FF         [ 7] 1021 	LD	H,#0xFF
   055A 18 02         [12] 1022 	JR	PCAJP3
   055C                    1023 	ORNNEG:
   055C 26 00         [ 7] 1024 	LD	H,#0
   055E                    1025 	PCAJP3:
   055E FD 5E 00      [19] 1026 	LD	E,0(IY)
   0561 FD 56 01      [19] 1027 	LD	D,1(IY)
   0564 ED 5A         [15] 1028 	ADC	HL,DE
   0566 FD 75 00      [19] 1029 	LD	0(IY),L
   0569 FD 74 01      [19] 1030 	LD	1(IY),H
   056C 18 0C         [12] 1031 	JR	ORNMJP1
                           1032 ;FUNCION	ORNAMENTOS
   056E                    1033 	PCAJP6:
   056E 23            [ 6] 1034 	INC	HL
   056F E5            [11] 1035 	PUSH	HL
   0570 F5            [11] 1036 	PUSH	AF
   0571 DD 7E 18      [19] 1037 	LD	A,_REG_NOTA_A - _PUNTERO_P_A(IX) ;RECUPERA REGISTRO DE NOTA EN EL CANAL
   0574 5E            [ 7] 1038 	LD	E,(HL) ;
   0575 8B            [ 4] 1039 	ADC	E ;+- NOTA
   0576 CDr98r05      [17] 1040 	CALL	TABLA_NOTAS
   0579 F1            [10] 1041 	POP	AF
   057A                    1042 	ORNMJP1:
   057A E1            [10] 1043 	POP	HL
   057B 23            [ 6] 1044 	INC	HL
   057C DD 75 00      [19] 1045 	LD	0(IX),L
   057F DD 74 01      [19] 1046 	LD	1(IX),H
   0582                    1047 	PCAJP5:
   0582 E1            [10] 1048 	POP	HL
   0583 DD 46 19      [19] 1049 	LD	B,_VOL_INST_A - _PUNTERO_P_A(IX) ;VOLUMEN RELATIVO
   0586 80            [ 4] 1050 	ADD	B
   0587 F2r8Cr05      [10] 1051 	JP	P,PCAJP7
   058A 3E 01         [ 7] 1052 	LD	A,#1 ;NO SE EXTIGUE EL VOLUMEN
   058C                    1053 	PCAJP7:
   058C E6 0F         [ 7] 1054 	AND	#0b00001111 ;VOLUMEN FINAL MODULADO
   058E 77            [ 7] 1055 	LD	(HL),A
   058F C9            [10] 1056 	RET
                           1057 ;NOTA	: REPRODUCE UNA NOTA
                           1058 ;IN	[A]=CODIGO DE LA NOTA
                           1059 ;	[IY]=REGISTROS DE FRECUENCIA
   0590                    1060 	NOTA:
   0590 69            [ 4] 1061 	LD	L,C
   0591 60            [ 4] 1062 	LD	H,B
   0592 CB 66         [12] 1063 	BIT	4,(HL)
   0594 47            [ 4] 1064 	LD	B,A
   0595 20 0E         [12] 1065 	JR	NZ,EVOLVENTES
   0597 78            [ 4] 1066 	LD	A,B
   0598                    1067 	TABLA_NOTAS:
   0598 2ArB1r00      [16] 1068 	LD	HL,(#_DATOS_NOTAS) ;BUSCA FRECUENCIA
   059B CDrF0r05      [17] 1069 	CALL	EXT_WORD
   059E FD 75 00      [19] 1070 	LD	0(IY),L
   05A1 FD 74 01      [19] 1071 	LD	1(IY),H
   05A4 C9            [10] 1072 	RET
                           1073 ;IN	[A]=CODIGO DE LA ENVOLVENTE
                           1074 ;	[IY]=REGISTRO DE FRECUENCIA
   05A5                    1075 	EVOLVENTES:
   05A5 2ArB1r00      [16] 1076 	LD	HL,(#_DATOS_NOTAS)
                           1077 ;SUB	12
   05A8 07            [ 4] 1078 	RLCA	;X2
   05A9 16 00         [ 7] 1079 	LD	D,#0
   05AB 5F            [ 4] 1080 	LD	E,A
   05AC 19            [11] 1081 	ADD	HL,DE
   05AD 5E            [ 7] 1082 	LD	E,(HL)
   05AE 23            [ 6] 1083 	INC	HL
   05AF 56            [ 7] 1084 	LD	D,(HL)
   05B0 D5            [11] 1085 	PUSH	DE
   05B1 3Ar69r00      [13] 1086 	LD	A,(#_ENVOLVENTE) ;FRECUENCIA DEL CANAL ON/OFF
   05B4 1F            [ 4] 1087 	RRA
   05B5 30 08         [12] 1088 	JR	NC,FRECUENCIA_OFF
   05B7 FD 73 00      [19] 1089 	LD	0(IY),E
   05BA FD 72 01      [19] 1090 	LD	1(IY),D
   05BD 18 09         [12] 1091 	JR	CONT_ENV
   05BF                    1092 	FRECUENCIA_OFF:
   05BF 11 00 00      [10] 1093 	LD	DE,#0
   05C2 FD 73 00      [19] 1094 	LD	0(IY),E
   05C5 FD 72 01      [19] 1095 	LD	1(IY),D
                           1096 ;CALCULO	DEL RATIO (OCTAVA ARRIBA)
   05C8                    1097 	CONT_ENV:
   05C8 D1            [10] 1098 	POP	DE
   05C9 F5            [11] 1099 	PUSH	AF
   05CA C5            [11] 1100 	PUSH	BC
   05CB E6 03         [ 7] 1101 	AND	#0b00000011
   05CD 47            [ 4] 1102 	LD	B,A
                           1103 ;INC	B
                           1104 ;AND	A ;1/2
   05CE CB 1A         [ 8] 1105 	RR	D
   05D0 CB 1B         [ 8] 1106 	RR	E
   05D2                    1107 	CRTBC0:
                           1108 ;AND	A ;1/4 - 1/8 - 1/16
   05D2 CB 1A         [ 8] 1109 	RR	D
   05D4 CB 1B         [ 8] 1110 	RR	E
   05D6 10 FA         [13] 1111 	DJNZ	CRTBC0
   05D8 7B            [ 4] 1112 	LD	A,E
   05D9 32r54r00      [13] 1113 	LD	(#_PSG_REG+11),A
   05DC 7A            [ 4] 1114 	LD	A,D
   05DD E6 03         [ 7] 1115 	AND	#0b00000011
   05DF 32r55r00      [13] 1116 	LD	(#_PSG_REG+12),A
   05E2 C1            [10] 1117 	POP	BC
   05E3 F1            [10] 1118 	POP	AF ;SELECCION FORMA DE ENVOLVENTE
   05E4 1F            [ 4] 1119 	RRA
   05E5 E6 06         [ 7] 1120 	AND	#0b00000110 ;$08,$0A,$0C,$0E
   05E7 C6 08         [ 7] 1121 	ADD	#8
   05E9 32r56r00      [13] 1122 	LD	(#_PSG_REG+13),A
   05EC 32r6Ar00      [13] 1123 	LD	(#_ENVOLVENTE_BACK),A
   05EF C9            [10] 1124 	RET
                           1125 ;EXTRAE	UN WORD DE UNA TABLA
                           1126 ;IN:(HL)=DIRECCION	TABLA
                           1127 ;	[A]= POSICION
                           1128 ;OUT(HL)=WORD
   05F0                    1129 	EXT_WORD:
   05F0 16 00         [ 7] 1130 	LD	D,#0
   05F2 07            [ 4] 1131 	RLCA
   05F3 5F            [ 4] 1132 	LD	E,A
   05F4 19            [11] 1133 	ADD	HL,DE
   05F5 5E            [ 7] 1134 	LD	E,(HL)
   05F6 23            [ 6] 1135 	INC	HL
   05F7 56            [ 7] 1136 	LD	D,(HL)
   05F8 EB            [ 4] 1137 	EX	DE,HL
   05F9 C9            [10] 1138 	RET
                           1139 	.area _CODE
                           1140 	.area _INITIALIZER
                           1141 	.area _CABS (ABS)
